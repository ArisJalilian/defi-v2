{"version":3,"sources":["components/Card/index.js","components/ResponsiveTable/index.js","lib/strategies/balancer/index.js","lib/strategies/contract-call/index.js","lib/strategies/erc20-balance-of/index.js","lib/strategies/erc20-balance-of-coeff/index.js","lib/strategies/erc20-balance-of-fixed-total/index.js","lib/strategies/erc20-balance-of-cv/index.js","lib/strategies/erc20-with-balance/index.js","lib/plugins/index.js","lib/strategies/erc20-balance-of-delegation/index.js","lib/strategies/eth-balance/index.js","lib/strategies/maker-ds-chief/index.js","lib/strategies/uni/index.js","lib/strategies/yearn-vault/index.js","lib/strategies/moloch/index.js","lib/strategies/uniswap/index.js","lib/strategies/pancake/index.js","lib/strategies/synthetix/index.js","lib/strategies/ctoken/index.js","lib/strategies/cream/index.js","lib/strategies/esd/index.js","lib/strategies/staked-uniswap/index.js","lib/strategies/index.js","lib/utils.js","pages/Proposals/index.js"],"names":["Header","Card","Body","CustomCard","styled","theme","modalBG","margin","marginBottom","marginTop","RCard","CustomHeader","isTable","CustomBody","CustomTitle","h4","ResponsiveCard","props","header","title","children","body","Comp","Wrapper","div","HeaderTitle","span","text1","HeaderValue","Row","withoutBorder","Field","centered","direction","Desc","size","Value","withPadding","ResponsiveTable","data","columns","breakpoint","className","map","row","index","hasOwnProperty","headerIndex","text","formatter","formatExtraData","col","colIndex","notCentered","isAction","dataField","BALANCER_SUBGRAPH_URL","space","network","provider","addresses","options","snapshot","a","params","poolShares","__args","where","userAddress_in","address","toLowerCase","balance_gt","first","orderBy","orderDirection","userAddress","id","balance","poolId","totalShares","tokens","block","number","subgraphRequest","result","score","forEach","poolShare","poolToken","split","getAddress","getArgs","args","arg","replace","blockTag","multicall","methodABI","name","response","Object","fromEntries","value","i","parseFloat","formatUnits","toString","decimals","abi","constant","inputs","internalType","type","outputs","payable","stateMutability","strategy","erc20BalanceOfStrategy","entries","coeff","totalScore","values","reduce","b","total","Math","sqrt","minBalance","getDelegations","delegations","delegate_in","delegator_not_in","space_in","delegator","delegate","SNAPSHOT_SUBGRAPH_URL","delegationsReverse","delegation","filter","keys","length","console","debug","concat","MULTICALL","MAKER_DS_CHIEF_ADDRESS","UNI_ADDRESS","Promise","all","pricePerFullShare","memberAddresses","addr","shares","UNISWAP_SUBGRAPH_URL","_space","users","id_in","liquidityPositions","liquidityTokenBalance_gt","liquidityTokenBalance","pair","token0","reserve0","token1","reserve1","totalSupply","tokenAddress","u","lp","token0perUni","token1perUni","userScore","sousChefabi","masterChefAbi","masterChefContractAddress","masterBalances","chefAddresses","item","sousBalances","prev","cur","idx","amount","synthetixStateAbi","synthetixStateContractAddress","_","quadraticWeighting","scaledValue","initialDebtOwnership","offsetCheck","getBlockNumber","oldBlockTag","balanceOfCalls","borrowBalanceCalls","calls","balancesOldResponse","balancesNowResponse","slice","borrowsNowResponse","resultData","noBorrow","borrowingRestricted","localeCompare","balanceNow","balanceOld","min","CREAM_SWAP_SUBGRAPH_URL","1","3","longTermPoolABI","creamAddress","creamSwapScore","creamBalanceOf","creamBalance","userBalance","numPool","pools","numAddress","push","balances","sum","j","daoQuery","dao","lpQuery","rewards","token","uniswap","uniswapESD","uniswapTotalSupply","daoBalances","lpBalances","Array","fill","mul","add","tokenAbi","uniswapAddress","stakingAddress","res","tokenBalanceInUni","tokensPerUni","balancer","erc20BalanceOf","uni","moloch","pancake","synthetix","ctoken","cream","esd","wanchain","itf","Interface","multi","getContract","multicallAbi","aggregate","call","encodeFunctionData","decodeFunctionResult","reject","url","query","fetch","method","headers","Accept","JSON","stringify","jsonToGraphQLQuery","json","getScores","strategies","_strategies","_numeral","format","numeral","formatProposal","base","proposal","parse","msg","input","fallback","err","jsonParse","version","payload","start","end","bpt_voting_disabled","metadata","formatProposals","proposals","Title","h2","PoolsButton","button","bg2","TradeButton","primary","StyledLink","Link","RowTitle","CellText","NewButton","GradientButton","StatusText","Proposals","library","useActiveWeb3React","useState","selectedProposal","setSelectedProposal","dispatch","useDispatch","useSelector","state","governance","spaces","governanceLoading","loading","match","useEffect","fetchSpaces","fetchProposals","history","transformProposals","selected","scores","transformed","assign","transformedProposal","sort","rowEvents","onClick","e","cellContent","rowIndex","shorten","ts","Date","now","toFixed","responsiveClassName","moment","actions","to","morePadding","xs","color","width","height","active","wrapperClasses","bordered","classes","bootstrap4","remote","keyField"],"mappings":"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","file":"static/js/39.91ba5d82.chunk.js","sourcesContent":["import { Card } from 'react-bootstrap';\nimport styled from 'styled-components';\n\nconst { Header, Body } = Card;\n\nexport const CustomCard = styled(Card)`\n  background-color: ${({ theme }) => theme.modalBG };\n  color: white;\n  margin-bottom: ${({margin, marginBottom}) => marginBottom ? `${marginBottom}px` : margin ? `${margin}px` : '20px'};\n  margin-top:  ${({margin, marginTop}) => marginTop ? `${marginTop}px` : margin ? `${margin}px` : '0'};;\n  border-radius: 18px;\n`\n\nexport const RCard = styled(CustomCard)`\n  @media (max-width: 767px) {\n      margin-left: -30px;\n      margin-right: -30px;\n      border-radius: 0;\n      \n      .card-body {\n        padding-left: 30px;\n        padding-right: 30px;\n      }\n  }\n \n`\n\nexport const CustomHeader = styled(Header)`\n  border-bottom-color: rgba(255, 255, 255, 0.5);\n  background-color: transparent;\n  padding: 20px;\n  \n  \n  @media (min-width: 768px) {\n  padding: ${({ isTable }) => isTable ? '30px 60px' : '30px'};\n  }\n`\n\nexport const CustomBody = styled(Body)`\n  padding: 20px;\n  background-color: transparent;\n  \n  \n  @media (min-width: 768px) {\n  padding: ${({ isTable }) => isTable ? '18px 48px' : '30px'};\n  }\n`\n\nexport const CustomTitle = styled.h4`\n    margin: 0;\n    font-weight: bold;\n    color: white;\n    font-size: 1.25rem;\n`\n\nconst Comp = props => {\n    return (\n        <CustomCard {...props}>\n            {props.header && (\n                <CustomHeader isTable={props.isTable}>\n                    {props.title && (\n                        <CustomTitle>{props.title}</CustomTitle>\n                    )}\n                    {props.header}\n                </CustomHeader>\n            )}\n            <CustomBody isTable={props.isTable}>\n                {props.children || props.body}\n            </CustomBody>\n        </CustomCard>\n    )\n}\nexport const ResponsiveCard = props => {\n    return (\n        <RCard {...props}>\n            {props.header && (\n                <CustomHeader isTable={props.isTable}>\n                    {props.title && (\n                        <CustomTitle>{props.title}</CustomTitle>\n                    )}\n                    {props.header}\n                </CustomHeader>\n            )}\n            <CustomBody isTable={props.isTable}>\n                {props.children || props.body}\n            </CustomBody>\n        </RCard>\n    )\n}\n\nexport default Comp;\n","import styled from 'styled-components';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  \n`\n\nconst Header = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin: -15px -15px 20px;\n  padding: 20px 16px 15px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.5);\n`\nconst HeaderTitle = styled.span`\n  display: block;\n  margin-bottom: 1rem;\n  font-size: .75rem;\n  font-weight: 400;\n  color: ${({ theme }) => theme.text1};\n`\n\nconst HeaderValue = styled.span`\n  display: block;\n  font-size: .875rem;\n  font-weight: 400;\n  color: ${({ theme }) => theme.text1};\n`\n\nconst Row = styled.div`\n  border-radius: 18px;\n  border: ${({ withoutBorder }) => withoutBorder ? 'none' : '1px solid rgba(255, 255, 255, 0.3)'};\n  padding: ${({ withoutBorder }) => withoutBorder ? '0' : '15px'};\n  \n  &:not(:last-child) {\n    margin-bottom: 10px;\n  }\n`\n\nconst Field = styled.div`\n  display: flex;\n  align-items: ${({ centered }) => centered ? 'center' : 'flex-start'};\n  justify-content: ${({ direction }) => direction !== 'rtl' ? 'flex-start' : 'space-between'};\n  \n  &:not(:last-child) {\n    margin-bottom: 20px;\n  }\n`\n\nconst Desc = styled.span`\n  font-size: ${({ size }) => size === 'lg' ? '0.875rem' : '0.75rem'};\n  font-weight: 400;\n  display: flex;\n  min-width: 100px;\n`\n\nconst Value = styled.div`\n  flex: 1;\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: ${({ direction }) => direction === 'rtl' ? 'flex-end' : 'flex-start'};\n  text-align: ${({ direction }) => direction === 'rtl' ? 'right' : 'left'};\n  padding-top: ${({ withPadding }) => withPadding ? '12px' : '0'};\n`\n\nconst ResponsiveTable = ({data, columns, breakpoint, ...props}) => {\n    return (\n        <Wrapper className={`d-flex d-${breakpoint}-none`}>\n            {data.map((row, index) => {\n                return (\n                    <Row key={`row-${index}`} withoutBorder={props.withoutBorder}>\n                        {props.hasOwnProperty('headerIndex') && (\n                            <Header>\n                                <HeaderTitle>{columns[props.headerIndex].text}</HeaderTitle>\n                                <HeaderValue>{columns[props.headerIndex].formatter(null, row, index, columns[props.headerIndex].hasOwnProperty('formatExtraData') ? columns[props.headerIndex].formatExtraData : {} )}</HeaderValue>\n                            </Header>\n                        )}\n                        {columns.map((col, colIndex) => {\n                            if(props.hasOwnProperty('headerIndex') && colIndex === props.headerIndex) {\n                                return null;\n                            }\n                            return (\n                                <Field key={col.dataField} direction={props.direction} centered={props.centered && !col.notCentered}>\n                                    {col.isAction ? (\n                                        <Value withPadding direction={props.direction}>{col.formatter(null, row, index, col.hasOwnProperty('formatExtraData') ? col.formatExtraData : {} )}</Value>\n                                    ) : (\n                                        <>\n                                            <Desc size={props.size}>{col.text}</Desc>\n                                            <Value direction={props.direction}>{col.formatter(null, row, index, col.hasOwnProperty('formatExtraData') ? col.formatExtraData : {} )}</Value>\n                                        </>\n                                    )}\n                                </Field>\n                            )\n                        })}\n                    </Row>\n                )\n            })}\n        </Wrapper>\n    )\n}\n\nexport default ResponsiveTable;\n","import { getAddress } from '@ethersproject/address';\nimport { subgraphRequest } from '../../utils';\n\nexport const author = 'bonustrack';\nexport const version = '0.1.0';\n\nconst BALANCER_SUBGRAPH_URL = {\n  '1': 'https://api.thegraph.com/subgraphs/name/balancer-labs/balancer-beta',\n  '42': 'https://api.thegraph.com/subgraphs/name/balancer-labs/balancer-kovan'\n};\n\nexport async function strategy(\n  space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const params = {\n    poolShares: {\n      __args: {\n        where: {\n          userAddress_in: addresses.map((address) => address.toLowerCase()),\n          balance_gt: 0\n        },\n        first: 1000,\n        orderBy: 'balance',\n        orderDirection: 'desc'\n      },\n      userAddress: {\n        id: true\n      },\n      balance: true,\n      poolId: {\n        totalShares: true,\n        tokens: {\n          id: true,\n          balance: true\n        }\n      }\n    }\n  };\n  if (snapshot !== 'latest') {\n    // @ts-ignore\n    params.poolShares.__args.block = { number: snapshot };\n  }\n  const result = await subgraphRequest(BALANCER_SUBGRAPH_URL[network], params);\n  const score = {};\n  if (result && result.poolShares) {\n    result.poolShares.forEach((poolShare) =>\n      poolShare.poolId.tokens.map((poolToken) => {\n        const [, tokenAddress] = poolToken.id.split('-');\n        if (tokenAddress === options.address.toLowerCase()) {\n          const userAddress = getAddress(poolShare.userAddress.id);\n          if (!score[userAddress]) score[userAddress] = 0;\n          score[userAddress] =\n            score[userAddress] +\n            (poolToken.balance / poolShare.poolId.totalShares) *\n              poolShare.balance;\n        }\n      })\n    );\n  }\n  return score || {};\n}\n","import { formatUnits } from '@ethersproject/units';\nimport { multicall } from '../../utils';\n\nexport const author = 'in19farkt';\nexport const version = '0.1.0';\n\nfunction getArgs(options, address) {\n  const args = options.args || ['%{address}'];\n  return args.map((arg) =>\n    typeof arg === 'string' ? arg.replace(/%{address}/g, address) : arg\n  );\n}\n\nexport async function strategy(\n  space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const blockTag = typeof snapshot === 'number' ? snapshot : 'latest';\n  const response = await multicall(\n    network,\n    provider,\n    [options.methodABI],\n    addresses.map((address) => [\n      options.address,\n      options.methodABI.name,\n      getArgs(options, address)\n    ]),\n    { blockTag }\n  );\n  return Object.fromEntries(\n    response.map((value, i) => [\n      addresses[i],\n      parseFloat(formatUnits(value.toString(), options.decimals))\n    ])\n  );\n}\n","import { formatUnits } from '@ethersproject/units';\nimport { multicall } from '../../utils';\n\nexport const author = 'bonustrack';\nexport const version = '0.1.0';\n\nconst abi = [\n  {\n    constant: true,\n    inputs: [\n      {\n        internalType: 'address',\n        name: 'account',\n        type: 'address'\n      }\n    ],\n    name: 'balanceOf',\n    outputs: [\n      {\n        internalType: 'uint256',\n        name: '',\n        type: 'uint256'\n      }\n    ],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function'\n  }\n];\n\nexport async function strategy(\n  space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const blockTag = typeof snapshot === 'number' ? snapshot : 'latest';\n  const response = await multicall(\n    network,\n    provider,\n    abi,\n    addresses.map((address) => [options.address, 'balanceOf', [address]]),\n    { blockTag }\n  );\n  return Object.fromEntries(\n    response.map((value, i) => [\n      addresses[i],\n      parseFloat(formatUnits(value.toString(), options.decimals))\n    ])\n  );\n}\n","import { strategy as erc20BalanceOfStrategy } from '../erc20-balance-of/index';\n\nexport const author = 'jxde';\nexport const version = '0.1.0';\n\nexport async function strategy(\n  space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const score = await erc20BalanceOfStrategy(\n    space,\n    network,\n    provider,\n    addresses,\n    options,\n    snapshot\n  );\n  return Object.fromEntries(\n    Object.entries(score).map((address) => [\n      address[0],\n      address[1] * options.coeff\n    ])\n  );\n}\n","import { strategy as erc20BalanceOfStrategy } from '../erc20-balance-of/index';\n\nexport const author = 'bonustrack';\nexport const version = '0.1.0';\n\nexport async function strategy(\n  space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const score = await erc20BalanceOfStrategy(\n    space,\n    network,\n    provider,\n    addresses,\n    options,\n    snapshot\n  );\n  const totalScore = Object.values(score).reduce((a, b) => a + b, 0);\n  return Object.fromEntries(\n    Object.entries(score).map((address) => [\n      address[0],\n      (options.total * address[1]) / totalScore\n    ])\n  );\n}\n","import { strategy as erc20BalanceOfStrategy } from '../erc20-balance-of/index';\n\nexport const author = 'bonustrack';\nexport const version = '0.1.0';\n\nexport async function strategy(\n  space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const score = await erc20BalanceOfStrategy(\n    space,\n    network,\n    provider,\n    addresses,\n    options,\n    snapshot\n  );\n  return Object.fromEntries(\n    Object.entries(score).map((address) => [address[0], Math.sqrt(address[1])])\n  );\n}\n","import { strategy as erc20BalanceOfStrategy } from '../erc20-balance-of/index';\n\nexport const author = 'BenjaminLu';\nexport const version = '0.1.1';\n\nexport async function strategy(\n  space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const score = await erc20BalanceOfStrategy(\n    space,\n    network,\n    provider,\n    addresses,\n    options,\n    snapshot\n  );\n  return Object.fromEntries(\n    Object.entries(score).map((address) => [\n      address[0],\n      address[1] > (options.minBalance || 0) ? 1 : 0\n    ])\n  );\n}\n","import { SNAPSHOT_SUBGRAPH_URL, subgraphRequest } from '../utils';\n\nexport async function getDelegations(\n    space,\n    network,\n    provider,\n    addresses,\n    options,\n    snapshot\n) {\n    const params = {\n        delegations: {\n            __args: {\n                where: {\n                    delegate_in: addresses.map((address) => address.toLowerCase()),\n                    delegator_not_in: addresses.map((address) => address.toLowerCase()),\n                    space_in: ['', space]\n                },\n                first: 1000\n            },\n            delegator: true,\n            space: true,\n            delegate: true\n        }\n    };\n    if (snapshot !== 'latest') {\n        // @ts-ignore\n        params.delegations.__args.block = { number: snapshot };\n    }\n    const result = await subgraphRequest(SNAPSHOT_SUBGRAPH_URL[network], params);\n    if (!result || !result.delegations) return {};\n\n    const delegationsReverse = {};\n    result.delegations.forEach(\n        (delegation) =>\n            (delegationsReverse[delegation.delegator] = delegation.delegate)\n    );\n    result.delegations\n        .filter((delegation) => delegation.space !== '')\n        .forEach(\n            (delegation) =>\n                (delegationsReverse[delegation.delegator] = delegation.delegate)\n        );\n\n    return Object.fromEntries(\n        addresses.map((address) => [\n            address,\n            Object.entries(delegationsReverse)\n                .filter(([, delegate]) => address.toLowerCase() === delegate)\n                .map(([delegator]) => delegator)\n        ])\n    );\n}\n","import { strategy as erc20BalanceOfStrategy } from '../erc20-balance-of/index';\nimport { getDelegations } from '../../plugins';\n\nexport const author = 'bonustrack';\nexport const version = '0.1.0';\n\nexport async function strategy(\n  space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const delegations = await getDelegations(\n    space,\n    network,\n    provider,\n    addresses,\n    options,\n    snapshot\n  );\n  if (Object.keys(delegations).length === 0) return {};\n  console.debug('Delegations', delegations);\n\n  const score = await erc20BalanceOfStrategy(\n    space,\n    network,\n    provider,\n    Object.values(delegations).reduce((a, b) =>\n      a.concat(b)\n    ),\n    options,\n    snapshot\n  );\n  console.debug('Delegators score', score);\n\n  return Object.fromEntries(\n    addresses.map((address) => {\n      const addressScore = delegations[address]\n        ? delegations[address].reduce((a, b) => a + score[b], 0)\n        : 0;\n      return [address, addressScore];\n    })\n  );\n}\n","import { formatUnits } from '@ethersproject/units';\nimport { multicall, MULTICALL } from '../../utils';\nimport { abi } from '../../../constants/abis/Multicall.json';\n\nexport const author = 'bonustrack';\nexport const version = '0.1.0';\n\nexport async function strategy(\n  space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const blockTag = typeof snapshot === 'number' ? snapshot : 'latest';\n  const response = await multicall(\n    network,\n    provider,\n    abi,\n    addresses.map((address) => [\n      MULTICALL[network],\n      'getEthBalance',\n      [address]\n    ]),\n    { blockTag }\n  );\n  return Object.fromEntries(\n    response.map((value, i) => [\n      addresses[i],\n      parseFloat(formatUnits(value.toString(), 18))\n    ])\n  );\n}\n","import { formatUnits } from '@ethersproject/units';\nimport { multicall } from '../../utils';\n\nexport const author = 'bonustrack';\nexport const version = '0.1.0';\n\nconst MAKER_DS_CHIEF_ADDRESS = {\n  '1': '0x9ef05f7f6deb616fd37ac3c959a2ddd25a54e4f5'\n};\n\nconst abi = [\n  {\n    constant: true,\n    inputs: [\n      {\n        name: '',\n        type: 'address'\n      }\n    ],\n    name: 'deposits',\n    outputs: [\n      {\n        name: '',\n        type: 'uint256'\n      }\n    ],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function'\n  }\n];\n\nexport async function strategy(\n  space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const blockTag = typeof snapshot === 'number' ? snapshot : 'latest';\n  const response = await multicall(\n    network,\n    provider,\n    abi,\n    addresses.map((address) => [\n      MAKER_DS_CHIEF_ADDRESS[network],\n      'deposits',\n      [address]\n    ]),\n    { blockTag }\n  );\n  return Object.fromEntries(\n    response.map((value, i) => [\n      addresses[i],\n      parseFloat(formatUnits(value.toString(), options.decimals))\n    ])\n  );\n}\n","import { formatUnits } from '@ethersproject/units';\nimport { multicall } from '../../utils';\n\nexport const author = 'bonustrack';\nexport const version = '0.1.0';\n\nconst UNI_ADDRESS = {\n  '1': '0x1f9840a85d5af5bf1d1762f925bdaddc4201f984'\n};\n\nconst abi = [\n  {\n    constant: true,\n    inputs: [\n      {\n        internalType: 'address',\n        name: 'account',\n        type: 'address'\n      }\n    ],\n    name: 'getCurrentVotes',\n    outputs: [\n      {\n        internalType: 'uint96',\n        name: '',\n        type: 'uint96'\n      }\n    ],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function'\n  }\n];\n\nexport async function strategy(\n  space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const blockTag = typeof snapshot === 'number' ? snapshot : 'latest';\n  const response = await multicall(\n    network,\n    provider,\n    abi,\n    addresses.map((address) => [\n      UNI_ADDRESS[network],\n      'getCurrentVotes',\n      [address.toLowerCase()],\n      { blockTag }\n    ])\n  );\n  return Object.fromEntries(\n    response.map((value, i) => [\n      addresses[i],\n      parseFloat(formatUnits(value.toString(), options.decimals))\n    ])\n  );\n}\n","import { formatUnits } from '@ethersproject/units';\nimport { multicall } from '../../utils';\nimport { strategy as erc20BalanceOfStrategy } from '../erc20-balance-of/index';\n\nexport const author = 'bonustrack';\nexport const version = '0.1.0';\n\nconst abi = [\n  {\n    constant: true,\n    inputs: [],\n    name: 'getPricePerFullShare',\n    outputs: [\n      {\n        internalType: 'uint256',\n        name: '',\n        type: 'uint256'\n      }\n    ],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function'\n  }\n];\n\nexport async function strategy(\n  space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const blockTag = typeof snapshot === 'number' ? snapshot : 'latest';\n  let [score, [pricePerFullShare]] = await Promise.all([\n    erc20BalanceOfStrategy(\n      space,\n      network,\n      provider,\n      addresses,\n      options,\n      snapshot\n    ),\n    multicall(\n      network,\n      provider,\n      abi,\n      [[options.address, 'getPricePerFullShare', []]],\n      { blockTag }\n    )\n  ]);\n  pricePerFullShare = parseFloat(formatUnits(pricePerFullShare.toString(), 18));\n  return Object.fromEntries(\n    Object.entries(score).map((address) => [\n      address[0],\n      address[1] * pricePerFullShare\n    ])\n  );\n}\n","import { formatUnits } from '@ethersproject/units';\nimport { multicall } from '../../utils';\n\nexport const author = 'adridadou';\nexport const version = '0.1.0';\n\nconst abi = [\n  {\n    inputs: [\n      {\n        internalType: 'address',\n        name: '',\n        type: 'address'\n      }\n    ],\n    name: 'memberAddressByDelegateKey',\n    outputs: [\n      {\n        internalType: 'address',\n        name: '',\n        type: 'address'\n      }\n    ],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'address',\n        name: '',\n        type: 'address'\n      }\n    ],\n    name: 'members',\n    outputs: [\n      {\n        internalType: 'address',\n        name: 'delegateKey',\n        type: 'address'\n      },\n      {\n        internalType: 'uint256',\n        name: 'shares',\n        type: 'uint256'\n      },\n      {\n        internalType: 'uint256',\n        name: 'loot',\n        type: 'uint256'\n      },\n      {\n        internalType: 'bool',\n        name: 'exists',\n        type: 'bool'\n      },\n      {\n        internalType: 'uint256',\n        name: 'highestIndexYesVote',\n        type: 'uint256'\n      },\n      {\n        internalType: 'uint256',\n        name: 'jailed',\n        type: 'uint256'\n      }\n    ],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'totalShares',\n    outputs: [\n      {\n        internalType: 'uint256',\n        name: '',\n        type: 'uint256'\n      }\n    ],\n    stateMutability: 'view',\n    type: 'function'\n  }\n];\n\nexport async function strategy(\n  space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const blockTag = typeof snapshot === 'number' ? snapshot : 'latest';\n  const memberAddresses = await multicall(\n    network,\n    provider,\n    abi,\n    addresses.map((address) => [\n      options.address,\n      'memberAddressByDelegateKey',\n      [address]\n    ]),\n    { blockTag }\n  );\n\n  const response = await multicall(\n    network,\n    provider,\n    abi,\n    memberAddresses\n      .filter(\n        (addr) =>\n          addr.toString() !== '0x0000000000000000000000000000000000000000'\n      )\n      .map((addr) => [options.address, 'members', [addr.toString()]]),\n    { blockTag }\n  );\n\n  return Object.fromEntries(\n    response.map((value, i) => [\n      addresses[i],\n      parseFloat(formatUnits(value.shares.toString(), options.decimals))\n    ])\n  );\n}\n","import { getAddress } from '@ethersproject/address';\nimport { subgraphRequest } from '../../utils';\n\nconst UNISWAP_SUBGRAPH_URL = {\n  '1': 'https://api.thegraph.com/subgraphs/name/uniswap/uniswap-v2'\n};\n\nexport const author = 'vfatouros';\nexport const version = '0.1.0';\n\nexport async function strategy(\n  _space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const params = {\n    users: {\n      __args: {\n        where: {\n          id_in: addresses.map((address) => address.toLowerCase())\n        },\n        first: 1000\n      },\n      id: true,\n      liquidityPositions: {\n        __args: {\n          where: {\n            liquidityTokenBalance_gt: 0\n          }\n        },\n        liquidityTokenBalance: true,\n        pair: {\n          id: true,\n          token0: {\n            id: true\n          },\n          reserve0: true,\n          token1: {\n            id: true\n          },\n          reserve1: true,\n          totalSupply: true\n        }\n      }\n    }\n  };\n  if (snapshot !== 'latest') {\n    // @ts-ignore\n    params.users.liquidityPositions.__args.block = { number: snapshot };\n  }\n  const tokenAddress = options.address.toLowerCase();\n  const result = await subgraphRequest(UNISWAP_SUBGRAPH_URL[network], params);\n  const score = {};\n  if (result && result.users) {\n    result.users.forEach((u) => {\n      u.liquidityPositions\n        .filter(\n          (lp) =>\n            lp.pair.token0.id == tokenAddress ||\n            lp.pair.token1.id == tokenAddress\n        )\n        .forEach((lp) => {\n          const token0perUni = lp.pair.reserve0 / lp.pair.totalSupply;\n          const token1perUni = lp.pair.reserve1 / lp.pair.totalSupply;\n          const userScore =\n            lp.pair.token0.id == tokenAddress\n              ? token0perUni * lp.liquidityTokenBalance\n              : token1perUni * lp.liquidityTokenBalance;\n\n          const userAddress = getAddress(u.id);\n          if (!score[userAddress]) score[userAddress] = 0;\n          score[userAddress] = score[userAddress] + userScore;\n        });\n    });\n  }\n  return score || {};\n}\n","import { formatUnits } from '@ethersproject/units';\nimport { multicall } from '../../utils';\nimport { strategy as erc20BalanceOfStrategy } from '../erc20-balance-of/index';\n\nexport const author = 'pancake-swap';\nexport const version = '0.0.1';\n\nconst sousChefabi = [\n  {\n    inputs: [\n      {\n        internalType: 'address',\n        name: '',\n        type: 'address'\n      }\n    ],\n    name: 'userInfo',\n    outputs: [\n      {\n        internalType: 'uint256',\n        name: 'amount',\n        type: 'uint256'\n      }\n    ],\n    stateMutability: 'view',\n    type: 'function'\n  }\n];\n\nconst masterChefAbi = [\n  {\n    inputs: [\n      {\n        internalType: 'uint256',\n        name: '',\n        type: 'uint256'\n      },\n      {\n        internalType: 'address',\n        name: '',\n        type: 'address'\n      }\n    ],\n    name: 'userInfo',\n    outputs: [\n      {\n        internalType: 'uint256',\n        name: 'amount',\n        type: 'uint256'\n      },\n      {\n        internalType: 'uint256',\n        name: 'rewardDebt',\n        type: 'uint256'\n      }\n    ],\n    stateMutability: 'view',\n    type: 'function'\n  }\n];\n\nconst masterChefContractAddress = '0x73feaa1eE314F8c655E354234017bE2193C9E24E';\n\nexport async function strategy(\n  space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const blockTag = typeof snapshot === 'number' ? snapshot : 'latest';\n  const score = await erc20BalanceOfStrategy(\n    space,\n    network,\n    provider,\n    addresses,\n    options,\n    snapshot\n  );\n\n  const masterBalances = await multicall(\n    network,\n    provider,\n    masterChefAbi,\n    addresses.map((address) => [\n      masterChefContractAddress,\n      'userInfo',\n      ['0', address]\n    ]),\n    { blockTag }\n  );\n\n  const sousBalances = await Promise.all(\n    options.chefAddresses.map((item) =>\n      multicall(\n        network,\n        provider,\n        sousChefabi,\n        addresses.map((address) => [\n          item.address,\n          'userInfo',\n          [address],\n          { blockTag }\n        ]),\n        { blockTag }\n      )\n    )\n  );\n\n  return Object.fromEntries(\n    Object.entries(score).map((address, index) => [\n      address[0],\n      address[1] +\n        masterBalances.reduce(\n          (prev, cur, idx) =>\n            prev + parseFloat(formatUnits(cur.amount.toString(), 18)),\n          0\n        ) +\n        sousBalances.reduce(\n          (prev, cur, idx) =>\n            prev +\n            parseFloat(\n              formatUnits(\n                cur[index].amount.toString(),\n                options.chefAddresses[idx].decimals\n              )\n            ),\n          0\n        )\n    ])\n  );\n}\n","import { formatUnits } from '@ethersproject/units';\nimport { multicall } from '../../utils';\n\nexport const author = 'andytcf';\nexport const version = '0.0.1';\n\nconst synthetixStateAbi = [\n  {\n    constant: true,\n    inputs: [{ name: '', type: 'address' }],\n    name: 'issuanceData',\n    outputs: [\n      { name: 'initialDebtOwnership', type: 'uint256' },\n      { name: 'debtEntryIndex', type: 'uint256' }\n    ],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function'\n  }\n];\n\nconst synthetixStateContractAddress =\n  '0x4b9Ca5607f1fF8019c1C6A3c2f0CC8de622D5B82';\n\nexport async function strategy(\n  space,\n  network,\n  provider,\n  addresses,\n  _,\n  snapshot\n) {\n  const blockTag = typeof snapshot === 'number' ? snapshot : 'latest';\n  const response = await multicall(\n    network,\n    provider,\n    synthetixStateAbi,\n    addresses.map((address) => [\n      synthetixStateContractAddress,\n      'issuanceData',\n      [address]\n    ]),\n    { blockTag }\n  );\n\n  const quadraticWeighting = (value) => {\n    // Scale the value by 100000\n    const scaledValue = value * 1e5;\n    return Math.sqrt(scaledValue);\n  };\n  return Object.fromEntries(\n    response.map((value, i) => {\n      return [\n        addresses[i],\n        // initialDebtOwnership returns in 27 decimal places\n        quadraticWeighting(\n          parseFloat(formatUnits(value.initialDebtOwnership.toString(), 27))\n        )\n      ];\n    })\n  );\n}\n","import { formatUnits } from '@ethersproject/units';\nimport { multicall } from '../../utils';\n\nexport const author = 'arr00';\nexport const version = '0.1.0';\n\nconst abi = [\n  {\n    constant: true,\n    inputs: [\n      {\n        internalType: 'address',\n        name: 'account',\n        type: 'address'\n      }\n    ],\n    name: 'balanceOf',\n    outputs: [\n      {\n        internalType: 'uint256',\n        name: '',\n        type: 'uint256'\n      }\n    ],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    constant: true,\n    inputs: [\n      {\n        internalType: 'address',\n        name: 'account',\n        type: 'address'\n      }\n    ],\n    name: 'borrowBalanceStored',\n    outputs: [\n      {\n        internalType: 'uint256',\n        name: '',\n        type: 'uint256'\n      }\n    ],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function'\n  }\n];\n\nexport async function strategy(\n  space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const blockTag = typeof snapshot === 'number' ? snapshot : 'latest';\n  const oldBlockTag =\n    typeof snapshot === 'number'\n      ? snapshot - options.offsetCheck\n      : (await provider.getBlockNumber()) - options.offsetCheck;\n\n  let balanceOfCalls = addresses.map((address) => [\n    options.address,\n    'balanceOf',\n    [address]\n  ]);\n  let borrowBalanceCalls = addresses.map((address) => [\n    options.address,\n    'borrowBalanceStored',\n    [address]\n  ]);\n  let calls = balanceOfCalls.concat(borrowBalanceCalls);\n\n  const [response, balancesOldResponse] = await Promise.all([\n    multicall(network, provider, abi, calls, { blockTag }),\n    multicall(\n      network,\n      provider,\n      abi,\n      addresses.map((address) => [\n        options.address,\n        'balanceOf',\n        [address]\n      ]),\n      { blockTag: oldBlockTag }\n    )\n  ]);\n\n  const balancesNowResponse = response.slice(0, addresses.length);\n  const borrowsNowResponse = response.slice(addresses.length);\n\n  let resultData = {};\n  for (let i = 0; i < balancesNowResponse.length; i++) {\n    let noBorrow = 1;\n    if (options.borrowingRestricted) {\n      noBorrow =\n        borrowsNowResponse[i].toString().localeCompare('0') == 0 ? 1 : 0;\n    }\n    const balanceNow = parseFloat(\n      formatUnits(balancesNowResponse[i].toString(), options.decimals)\n    );\n    const balanceOld = parseFloat(\n      formatUnits(balancesOldResponse[i].toString(), options.decimals)\n    );\n    resultData[addresses[i]] = Math.min(balanceNow, balanceOld) * noBorrow;\n  }\n  return resultData;\n}\n","import { formatUnits } from '@ethersproject/units';\nimport { getAddress } from '@ethersproject/address';\nimport { subgraphRequest, multicall } from '../../utils';\n\nexport const author = 'bun919tw';\nexport const version = '0.1.0';\n\nconst CREAM_SWAP_SUBGRAPH_URL = {\n  1: 'https://api.thegraph.com/subgraphs/name/creamfinancedev/cream-swap-v2',\n  3: 'https://api.thegraph.com/subgraphs/name/creamfinancedev/cream-swap-dev'\n};\n\nconst longTermPoolABI = [\n  {\n    constant: true,\n    inputs: [\n      {\n        internalType: 'address',\n        name: 'account',\n        type: 'address'\n      }\n    ],\n    name: 'balanceOf',\n    outputs: [\n      {\n        internalType: 'uint256',\n        name: '',\n        type: 'uint256'\n      }\n    ],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function'\n  }\n];\n\nexport async function strategy(\n  space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const creamAddress = options.address;\n  let [score, creamBalance] = await Promise.all([\n    creamSwapScore(network, addresses, creamAddress, snapshot),\n    creamBalanceOf(network, provider, addresses, options, snapshot)\n  ]);\n  for (const [userAddress, userBalance] of Object.entries(creamBalance)) {\n    if (!score[userAddress]) score[userAddress] = 0;\n    score[userAddress] = score[userAddress] + userBalance;\n  }\n\n  return score || {};\n}\n\nasync function creamSwapScore(network, addresses, creamAddress, snapshot) {\n  const params = {\n    poolShares: {\n      __args: {\n        where: {\n          userAddress_in: addresses.map((address) => address.toLowerCase()),\n          balance_gt: 0\n        },\n        first: 1000,\n        orderBy: 'balance',\n        orderDirection: 'desc'\n      },\n      userAddress: {\n        id: true\n      },\n      balance: true,\n      poolId: {\n        totalShares: true,\n        tokens: {\n          id: true,\n          balance: true\n        }\n      }\n    }\n  };\n  if (snapshot !== 'latest') {\n    // @ts-ignore\n    params.poolShares.__args.block = { number: snapshot };\n  }\n  const result = await subgraphRequest(\n    CREAM_SWAP_SUBGRAPH_URL[network],\n    params\n  );\n  const score = {};\n  if (result && result.poolShares) {\n    result.poolShares.forEach((poolShare) =>\n      poolShare.poolId.tokens.map((poolToken) => {\n        const [, tokenAddress] = poolToken.id.split('-');\n        if (typeof creamAddress === 'string' && tokenAddress === creamAddress.toLowerCase()) {\n          const userAddress = getAddress(poolShare.userAddress.id);\n          if (!score[userAddress]) score[userAddress] = 0;\n          score[userAddress] =\n            score[userAddress] +\n            (poolToken.balance / poolShare.poolId.totalShares) *\n              poolShare.balance;\n        }\n      })\n    );\n  }\n  return score || {};\n}\n\nasync function creamBalanceOf(network, provider, addresses, options, snapshot) {\n  const blockTag = typeof snapshot === 'number' ? snapshot : 'latest';\n  const numPool = options.pools.length;\n  const numAddress = addresses.length;\n\n  const calls = [];\n  for (let i = 0; i < numPool; i++) {\n    calls.push(\n      ...addresses.map((address) => [\n        options.pools[i].address,\n        'balanceOf',\n        [address]\n      ])\n    );\n  }\n\n  const balances = await multicall(network, provider, longTermPoolABI, calls, {\n    blockTag\n  });\n\n  return Object.fromEntries(\n    addresses.map((address, i) => {\n      let sum = 0;\n      for (let j = 0; j < numPool; j++) {\n        sum += parseFloat(\n          formatUnits(balances[i + j * numAddress].toString(), 18)\n        );\n      }\n      return [address, sum];\n    })\n  );\n}\n","import { formatUnits } from '@ethersproject/units';\nimport { multicall } from '../../utils';\n\nexport const author = 'l3wi';\nexport const version = '0.1.0';\n\nconst abi = [\n  {\n    constant: true,\n    inputs: [{ internalType: 'address', name: 'account', type: 'address' }],\n    name: 'balanceOfBonded',\n    outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    constant: true,\n    inputs: [{ internalType: 'address', name: '', type: 'address' }],\n    name: 'balanceOf',\n    outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    constant: true,\n    inputs: [],\n    name: 'totalSupply',\n    outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function'\n  }\n];\n\nexport async function strategy(\n  space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const blockTag = typeof snapshot === 'number' ? snapshot : 'latest';\n\n  const daoQuery = addresses.map((address) => [\n    options.dao,\n    'balanceOfBonded',\n    [address]\n  ]);\n\n  const lpQuery = addresses.map((address) => [\n    options.rewards,\n    'balanceOfBonded',\n    [address]\n  ]);\n\n  const response = await multicall(\n    network,\n    provider,\n    abi,\n    [\n      [options.token, 'balanceOf', [options.uniswap]],\n      [options.uniswap, 'totalSupply'],\n      ...daoQuery,\n      ...lpQuery\n    ],\n    { blockTag }\n  );\n\n  const uniswapESD = response[0];\n  const uniswapTotalSupply = response[1];\n  const daoBalances = response.slice(2, addresses.length + 2);\n  const lpBalances = response.slice(\n    addresses.length + 2,\n    addresses.length * 2 + 2\n  );\n\n  return Object.fromEntries(\n    Array(addresses.length)\n      .fill('x')\n      .map((_, i) => [\n        addresses[i],\n        parseFloat(\n          formatUnits(\n            uniswapESD[0]\n              .div(uniswapTotalSupply[0])\n              .mul(lpBalances[i][0])\n              .add(daoBalances[i][0])\n              .toString(),\n            options.decimals\n          )\n        )\n      ])\n  );\n}\n","import { multicall } from '../../utils';\n\nexport const author = 'vfatouros';\nexport const version = '0.1.0';\n\nconst tokenAbi = [\n  {\n    constant: true,\n    inputs: [\n      {\n        internalType: 'address',\n        name: 'account',\n        type: 'address'\n      }\n    ],\n    name: 'balanceOf',\n    outputs: [\n      {\n        internalType: 'uint256',\n        name: '',\n        type: 'uint256'\n      }\n    ],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    constant: true,\n    inputs: [],\n    name: 'totalSupply',\n    outputs: [\n      {\n        internalType: 'uint256',\n        name: '',\n        type: 'uint256'\n      }\n    ],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function'\n  }\n];\n\nexport async function strategy(\n  _space,\n  network,\n  provider,\n  addresses,\n  options,\n  snapshot\n) {\n  const blockTag = typeof snapshot === 'number' ? snapshot : 'latest';\n  const res = await multicall(\n    network,\n    provider,\n    tokenAbi,\n    [\n      [options.uniswapAddress, 'totalSupply', []],\n      [options.tokenAddress, 'balanceOf', [options.uniswapAddress]]\n    ].concat(\n      addresses.map((address) => [\n        options.stakingAddress,\n        'balanceOf',\n        [address]\n      ])\n    ),\n    { blockTag }\n  );\n\n  const totalSupply = res[0];\n  const tokenBalanceInUni = res[1];\n  const tokensPerUni =\n    tokenBalanceInUni / 10 ** options.decimals / (totalSupply / 1e18);\n\n  const response = res.slice(2);\n\n  return Object.fromEntries(\n    response.map((value, i) => [\n      addresses[i],\n      (value / 10 ** options.decimals) * tokensPerUni\n    ])\n  );\n}\n","import { strategy as balancer } from './balancer/index';\nimport { strategy as contractCall } from './contract-call/index';\nimport { strategy as erc20BalanceOf } from './erc20-balance-of/index';\nimport { strategy as erc20BalanceOfCoeff } from './erc20-balance-of-coeff/index';\nimport { strategy as erc20BalanceOfFixedTotal } from './erc20-balance-of-fixed-total/index';\nimport { strategy as erc20BalanceOfCv } from './erc20-balance-of-cv/index';\nimport { strategy as erc20WithBalance } from './erc20-with-balance/index';\nimport { strategy as erc20BalanceOfDelegation } from './erc20-balance-of-delegation/index';\nimport { strategy as ethBalance } from './eth-balance/index';\nimport { strategy as makerDsChief } from './maker-ds-chief/index';\nimport { strategy as uni } from './uni/index';\nimport { strategy as yearnVault } from './yearn-vault/index';\nimport { strategy as moloch } from './moloch/index';\nimport { strategy as uniswap } from './uniswap/index';\nimport { strategy as pancake } from './pancake/index';\nimport { strategy as synthetix } from './synthetix/index';\nimport { strategy as ctoken } from './ctoken/index';\nimport { strategy as cream } from './cream/index';\nimport { strategy as esd } from './esd/index';\nimport { strategy as stakedUniswap } from './staked-uniswap/index';\n\nexport default {\n  balancer,\n  'contract-call': contractCall,\n  'erc20-balance-of': erc20BalanceOf,\n  'erc20-balance-of-fixed-total': erc20BalanceOfFixedTotal,\n  'erc20-balance-of-cv': erc20BalanceOfCv,\n  'erc20-balance-of-coeff': erc20BalanceOfCoeff,\n  'erc20-with-balance': erc20WithBalance,\n  'erc20-balance-of-delegation': erc20BalanceOfDelegation,\n  'eth-balance': ethBalance,\n  'maker-ds-chief': makerDsChief,\n  uni,\n  'yearn-vault': yearnVault,\n  moloch,\n  uniswap,\n  pancake,\n  synthetix,\n  ctoken,\n  cream,\n  'staked-uniswap': stakedUniswap,\n  esd\n};\n","import { Interface } from '@ethersproject/abi';\nimport { Contract } from '@ethersproject/contracts';\nimport numeral from 'numeral'\nimport { jsonToGraphQLQuery } from 'json-to-graphql-query';\nimport { abi as multicallAbi } from '../constants/abis/Multicall.json';\nimport _strategies from './strategies';\nimport {getContract} from \"../utils\";\n\nexport const MULTICALL = {\n    '1': '0xeefba1e63905ef1d7acba5a8513c70307c1ce441',\n    '4': '0x42ad527de7d4e9d9d011ac45b31d8551f8fe9821',\n    '5': '0x77dca2c955b15e9de4dbbcf1246b4b85b651e50e',\n    '6': '0x53c43764255c17bd724f74c4ef150724ac50a3ed',\n    '42': '0x2cc8688c5f75e365aaeeb4ea8d6a480405a48d2a',\n    '56': '0x1ee38d535d541c55c9dae27b12edf090c608e6fb',\n    '82': '0x579De77CAEd0614e3b158cb738fcD5131B9719Ae',\n    '97': '0x8b54247c6BAe96A6ccAFa468ebae96c4D7445e46',\n    '100': '0xb5b692a88bdfc81ca69dcb1d924f59f0413a602a',\n    wanchain: '0xba5934ab3056fca1fa458d30fbb3810c3eb5145f'\n};\n\nexport const SNAPSHOT_SUBGRAPH_URL = {\n    '1': 'https://api.thegraph.com/subgraphs/name/snapshot-labs/snapshot',\n    '4': 'https://api.thegraph.com/subgraphs/name/snapshot-labs/snapshot-rinkeby',\n    '42': 'https://api.thegraph.com/subgraphs/name/snapshot-labs/snapshot-kovan'\n};\n\nexport async function call(provider, abi, call, options) {\n    const contract = new Contract(call[0], abi, provider);\n    try {\n        const params = call[2] || [];\n        return await contract[call[1]](...params, options || {});\n    } catch (e) {\n        return Promise.reject(e);\n    }\n}\n\nexport async function multicall(\n    network,\n    provider,\n    abi,\n    calls,\n    options\n) {\n    const itf = new Interface(abi);\n    const multi = getContract(MULTICALL[network], multicallAbi, provider);\n    try {\n        try {\n            const [, res] = await multi.aggregate(\n                calls.map((call) => [\n                    call[0].toLowerCase(),\n                    itf.encodeFunctionData(call[1], call[2])\n                ]),\n                options || {}\n            )\n            return res.map((call, i) => itf.decodeFunctionResult(calls[i][1], call));\n        } catch(e) {\n            return [];\n        }\n\n    } catch (e) {\n        return Promise.reject(e);\n    }\n}\n\nexport async function subgraphRequest(url, query) {\n    const res = await fetch(url, {\n        method: 'POST',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ query: jsonToGraphQLQuery({ query }) })\n    });\n    const { data } = await res.json();\n    return data || {};\n}\n\nexport async function ipfsGet(\n    gateway,\n    ipfsHash,\n    protocolType = 'ipfs'\n) {\n    const url = `https://${gateway}/${protocolType}/${ipfsHash}`;\n    return fetch(url).then((res) => res.json());\n}\n\n\nexport async function getScores(\n    space,\n    strategies,\n    network,\n    provider,\n    addresses,\n    snapshot = 'latest'\n) {\n    return await Promise.all(\n        strategies.map((strategy) =>\n            _strategies[strategy.name](\n                space,\n                network,\n                provider,\n                addresses,\n                strategy.params,\n                snapshot\n            )\n        )\n    );\n}\n\nexport function jsonParse(input, fallback) {\n    if (typeof input !== 'string') {\n        return fallback || {};\n    }\n    try {\n        return JSON.parse(input);\n    } catch (err) {\n        return fallback || {};\n    }\n}\n\nexport function _numeral(number, format = '(0.[00]a)') {\n    return numeral(number).format(format);\n}\n\nexport function formatProposal(base) {\n    const proposal = JSON.parse(JSON.stringify(base));\n    proposal.msg = jsonParse(proposal.msg, proposal.msg);\n\n    // v0.1.0\n    if (proposal.msg.version === '0.1.0') {\n        proposal.msg.payload.start = 1595088000;\n        proposal.msg.payload.end = 1595174400;\n        proposal.msg.payload.snapshot = 10484400;\n        proposal.bpt_voting_disabled = '1';\n    }\n\n    // v0.1.1\n    if (proposal.msg.version === '0.1.0' || proposal.msg.version === '0.1.1') {\n        proposal.msg.payload.metadata = {};\n    }\n\n    return proposal;\n}\n\nexport function formatProposals(proposals) {\n    return Object.fromEntries(\n        Object.entries(proposals).map(proposal => [\n            proposal[0],\n            formatProposal(proposal[1])\n        ])\n    );\n}\n\nexport default {\n    call,\n    multicall,\n    subgraphRequest,\n    ipfsGet,\n    getScores,\n};\n","import React, { useEffect, useState } from 'react';\nimport { Row, Col } from 'react-bootstrap';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport moment from \"moment\";\nimport styled from \"styled-components\";\n\nimport { ResponsiveCard } from \"../../components/Card\";\nimport {fetchProposals, fetchSpaces} from \"../../state/governance/actions\";\nimport {shorten} from \"../../state/governance/hooks\";\nimport {Link} from \"react-router-dom\";\nimport {formatProposals, getScores} from \"../../lib/utils\";\nimport {useActiveWeb3React} from \"../../hooks\";\nimport Loading from \"../../components/Loading\";\nimport Page from \"../../components/Page\";\nimport './style.scss';\nimport '../../components/UI/Button/style.scss';\nimport ResponsiveTable from \"../../components/ResponsiveTable\";\n\nconst Header = styled.div`\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n  border: none;\n  background-color: transparent;\n  \n  @media (max-width: 767px) {\n    flex-direction: column;\n    align-items: stretch;\n  }\n`\n\nconst Title = styled.h2`\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: white;\n  margin: 0;\n  \n  @media (max-width: 767px) {\n    margin-bottom: 30px;\n  }\n`\n\nconst PoolsButton = styled.button`\n  border-radius: 12px;\n  background-color: ${({ theme }) => theme.bg2};\n  padding: 6px 20px;\n  max-height: 40px;\n  min-height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  white-space: nowrap;\n  font-size: 1rem;\n  font-family: inherit;\n  font-weight: 500;\n  border: none;\n  outline: none;\n  text-decoration: none;\n  \n  &:hover,\n  &:focus,\n  &:active {\n      text-decoration: none;\n      outline: none;\n      box-shadow: none;\n  }\n`\n\n\nconst TradeButton =  styled(PoolsButton)`\n  color: ${({ theme }) => theme.primary};\n  width: 100%;\n  \n  &:hover {\n    color: ${({ theme }) => theme.bg2};\n    background-color: ${({ theme }) => theme.primary};\n  }\n`\n\nconst StyledLink = styled(Link)`\n  text-decoration: none;\n  &:hover,\n  &:focus,\n  &:active {\n      text-decoration: none;\n      outline: none;\n      box-shadow: none;\n  }\n`\n\nconst RowTitle = styled.span`\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 19px;\n  color: white;\n  \n  @media (max-width: 991px) {\n    font-size: .875rem;\n  }\n`\n\nconst CellText = styled.span`\n  font-weight: 700;\n  font-size: .875rem;\n  color: white;\n  white-space: nowrap;\n  \n  @media (max-width: 991px) {\n  font-weight: 400;\n  }\n`\n\nconst NewButton = styled(Link)`\n    background-color: rgba(71, 183, 254, 0.12);\n    height: 56px;\n    padding: 6px 20px;\n    border-radius: 18px;\n    color: ${({ theme }) => theme.primary};\n    display: flex;\n    align-items: center;\n    transition: 0.3s ease all;\n    justify-content: center;\n   \n    :hover,\n    :focus, \n    :active{\n        background-color: rgba(71, 183, 254, 1);\n        color: white;      \n        text-decoration: none;\n        outline: none;\n    }\n`\n\nconst GradientButton = styled(Link)`\n    height: 56px;\n    padding: 6px 20px;\n    border-radius: 18px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 20px;\n   \n    :hover,\n    :focus, \n    :active{ \n        text-decoration: none;\n        outline: none;\n    }\n`\n\nconst StatusText = styled.span`\n  \n  @media (max-width: 991px) {\n    font-size: .875rem;\n  }\n`\n\nconst Proposals = (props) => {\n    const { library } = useActiveWeb3React();\n    const [selectedProposal, setSelectedProposal] = useState({})\n    const dispatch = useDispatch();\n    const {spaces, loading: governanceLoading, proposals} = useSelector(state => state.governance);\n\n    let id = props.match.params.space;\n    let space = spaces[id];\n\n    useEffect(() => {\n        if(Object.keys(spaces).length === 0) {\n            dispatch(fetchSpaces());\n        } else {\n            if(spaces.hasOwnProperty(id)) {\n                dispatch(fetchProposals(id));\n            } else {\n                props.history.push('/tools/governance');\n            }\n        }\n    }, [spaces, id, props.history, dispatch])\n\n    const transformProposals = async (proposals, id) => {\n        if(proposals.hasOwnProperty(id)) {\n            let result = {};\n            const selected = proposals[id];\n            const scores = await getScores(\n                id,\n                space.strategies,\n                space.network,\n                library,\n                Object.values(selected).map((proposal) => proposal.address)\n            )\n            result = Object.fromEntries(\n                Object.entries(selected).map((proposal) => {\n                    const transformed = [proposal[0], Object.assign({}, proposal[1])]\n                    transformed[1].score = scores.reduce(\n                        (a, b) => a + (b[transformed[1].address] || 0),\n                        0\n                    );\n                    return [transformed[0], transformed[1]];\n                })\n            );\n\n            result = formatProposals(result);\n            const transformedProposal = Object.fromEntries(\n                Object.entries(result)\n                    .sort((a, b) => b[1].msg.payload.end - a[1].msg.payload.end, 0)\n            );\n            setSelectedProposal(transformedProposal);\n        } else {\n            setSelectedProposal({})\n        }\n    }\n\n    useEffect(() => {\n        transformProposals(proposals, id)\n    }, [proposals, id]);\n\n    const rowEvents = {\n        onClick: (e, row) => {\n            props.history.push(`/tools/governance/${id}/proposal/${row[0]}`);\n        }\n    }\n\n    const columns = [\n        {\n            dataField: \"asset\",\n            text: \"Description\",\n            formatter: (cellContent, row, rowIndex) => (\n                <RowTitle>{shorten(row[1].msg.payload.name, 'name')}</RowTitle>\n            ),\n        },\n        {\n            dataField: \"status\",\n            text: \"Status\",\n            formatter(cellContent, row) {\n                const ts = (Date.now() / 1e3).toFixed();\n                const { start, end } = row[1].msg.payload;\n                let state = ts > end ? {title: 'Closed', className: 'label-light-danger', responsiveClassName: 'text-danger'} : ts > start ? {title: 'Active', className: 'label-light-success', responsiveClassName: 'text-success'} : {title: 'Pending', className: 'label-light-info', responsiveClassName: 'text-info'};\n                return (\n                    <>\n                        <span className={`label ${state.className} label-lg d-none d-lg-flex w-100 label-inline py-3`}>\n                            {state.title}\n                        </span>\n                        <StatusText className={`d-flex d-lg-none ${state.responsiveClassName}`}>\n                            {state.title}\n                        </StatusText>\n                    </>\n                )\n            }\n        },\n        {\n            dataField: \"start\",\n            text: \"Start Date\",\n            formatter(cellContent, row) {\n                return (\n                    <CellText>\n                        {moment(row[1].msg.payload.start * 1e3).format('YYYY/MM/DD HH:mm')}\n                    </CellText>\n                )\n            }\n        },\n        {\n            dataField: \"end\",\n            text: \"End Date\",\n            formatter(cellContent, row) {\n                return (\n                    <CellText>\n                        {moment(row[1].msg.payload.end * 1e3).format('YYYY/MM/DD HH:mm')}\n                    </CellText>\n                )\n            }\n        },\n        {\n            dataField: \"author\",\n            text: \"Author\",\n            formatter(cellContent, row) {\n                return (\n                    <CellText>\n                        {row[1].address.slice(0, 6)}...{row[1].address.slice(-4)}\n                    </CellText>\n                )\n            }\n        },\n\n    ]\n\n    const actions = {\n        dataField: \"actions\",\n        text: \"Actions\",\n        formatter(cellContent, row) {\n            return (\n                <div className=\"d-flex flex-column align-items-stretch align-items-lg-center justify-content-center w-100\">\n                    <StyledLink to={`/tools/governance/${id}/proposal/${row[0]}`}>\n                        <TradeButton>\n                            View More\n                        </TradeButton>\n                    </StyledLink>\n                </div>\n            )\n        },\n        isAction: true\n    }\n\n\n    return (\n        <Page title={'Governance'} morePadding>\n            <Row>\n                <Col xs={12}>\n                    <ResponsiveCard marginTop={-30} marginBottom={0}>\n                        <Header >\n                            <Title className=\"card-title\">Proposals</Title>\n                            <NewButton to={`${props.match.url}/create`} className=\"bg-light-primary d-none d-md-flex\">Create New</NewButton>\n                            <GradientButton to={`${props.match.url}/create`} className=\" btn btn-primary btn-gradient-primary d-flex d-md-none\">Create New</GradientButton>\n                        </Header>\n                        <div>\n                            {governanceLoading ? (\n                                <div className=\"d-flex align-items-center justify-content-center py-5 w-100\">\n                                    <Loading color={'primary'} width={40} height={40} active id={'proposals'}/>\n                                </div>\n                            ) : (\n                                <>\n                                    <BootstrapTable\n                                        wrapperClasses=\"table-responsive d-none d-lg-block\"\n                                        bordered={false}\n                                        classes={`table table-head-custom table-borderless table-vertical-center overflow-hidden table-hover proposals__table`}\n                                        bootstrap4\n                                        remote\n                                        keyField=\"id\"\n                                        columns={columns}\n                                        data={Object.entries(selectedProposal)}\n                                        rowEvents={rowEvents}\n                                    >\n                                    </BootstrapTable>\n                                    <ResponsiveTable breakpoint={'lg'} direction={'rtl'} columns={columns.concat(actions)} data={Object.entries(selectedProposal)} headerIndex={0}/>\n                                </>\n                            )}\n                        </div>\n                    </ResponsiveCard>\n                </Col>\n            </Row>\n        </Page>\n    )\n}\n\nexport default Proposals;\n"],"sourceRoot":""}